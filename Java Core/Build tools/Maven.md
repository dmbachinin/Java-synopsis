# СОДЕРЖАНИЕ:

- [Maven](#maven)

# Maven

`Maven` — это инструмент для управления проектами и сборки на базе Java, разработанный Apache Software Foundation. Он упрощает процесс сборки и управления зависимостями, а также предоставляет стандартизированную структуру проекта.  
`Maven` использует декларативный подход к сборке проектов (мы говорим, что мы хотим, "собери проект", например). Исопльзует язык XML.

`Maven` помогает в подлкючении сторонних библиотек, нам достаточно указать, что мы хотим подлючить. После чего Maven сам будет искать данную библиотеку сначала на локальном компьютере, если он ее не найдет, то он будет пытаться найти ее на удаленном репозитории ([Maven central](https://mvnrepository.com))

#### Основные функции Maven:

1. **Управление зависимостями:**
   Maven позволяет легко управлять зависимостями проекта. Все зависимости указываются в файле `pom.xml`, и Maven автоматически загружает их из центрального репозитория Maven или других настроенных репозиториев.

2. **Компиляция:**
   Maven автоматически обрабатывает компиляцию исходного кода проекта и его ресурсов. Он использует стандартную структуру каталогов, что упрощает организацию проекта.

3. **Тестирование:**
   Maven поддерживает интеграцию с различными фреймворками для тестирования, такими как JUnit и TestNG. Он позволяет запускать тесты и генерировать отчеты о тестировании.

4. **Сборка артефактов:**
   Maven может создавать различные типы артефактов, такие как JAR, WAR и EAR файлы, которые можно использовать для развёртывания приложений.

5. **Плагины:**
   Maven имеет модульную архитектуру, которая позволяет использовать плагины для выполнения различных задач. Существует множество плагинов, которые могут расширять возможности Maven, например, для создания документации, анализа кода, деплоя и т.д.

#### Структура проекта Maven:

Maven использует стандартную структуру каталогов:
- `src/main/java` — исходные коды Java.
- `src/main/resources` — ресурсы, используемые в приложении.
- `src/test/java` — тестовые классы Java.
- `src/test/resources` — ресурсы для тестов.

#### Основные команды Maven:

Maven предоставляет множество команд для выполнения различных задач по сборке, тестированию, упаковке и развертыванию проектов. Вот основные команды `mvn`, которые часто используются:

1. **`mvn clean`**
   Удаляет скомпилированные файлы и другие артефакты, созданные в процессе сборки. Полезно для очистки проекта перед новой сборкой.
   ```shell
   mvn clean
   ```

2. **`mvn compile`**
   Компилирует исходный код проекта.
   ```shell
   mvn compile
   ```

3. **`mvn test`**
   Запускает тесты, используя тестовый фреймворк, указанный в проекте (например, JUnit).
   ```shell
   mvn test
   ```

4. **`mvn package`**
   Упаковывает скомпилированный код в JAR или WAR файл, в зависимости от конфигурации проекта.
   ```shell
   mvn package
   ```

5. **`mvn install`**
   Устанавливает собранный артефакт в локальный репозиторий Maven. Это позволяет другим проектам использовать этот артефакт в качестве зависимости.
   ```shell
   mvn install
   ```

6. **`mvn deploy`**
   Деплоит собранный артефакт в удаленный репозиторий, который может быть доступен другим разработчикам.
   ```shell
   mvn deploy
   ```

#### Дополнительные команды:

1. **`mvn validate`**
   Проверяет корректность проекта и конфигурации POM.
   ```shell
   mvn validate
   ```

2. **`mvn verify`**
   Выполняет все проверки и интеграционные тесты, чтобы убедиться, что проект готов к упаковке.
   ```shell
   mvn verify
   ```

3. **`mvn site`**
   Генерирует сайт проекта с документацией на основе информации, предоставленной в POM-файле.
   ```shell
   mvn site
   ```

4. **`mvn dependency:resolve`**
   Разрешает все зависимости проекта и загружает их в локальный репозиторий, если это необходимо.
   ```shell
   mvn dependency:resolve
   ```

5. **`mvn dependency:tree`**
   Выводит дерево зависимостей проекта.
   ```shell
   mvn dependency:tree
   ```

6. **`mvn eclipse:eclipse`**
   Генерирует файлы конфигурации для Eclipse IDE.
   ```shell
   mvn eclipse:eclipse
   ```

7. **`mvn idea:idea`**
   Генерирует файлы конфигурации для IntelliJ IDEA.
   ```shell
   mvn idea:idea
   ```

8. **`mvn clean install`**
   Комбинирует команды `clean` и `install`, сначала очищая проект, а затем устанавливая артефакт в локальный репозиторий.
   ```shell
   mvn clean install
   ```

9. **`mvn help:describe -Dcmd=<command>`**
   Описывает указанную команду Maven, предоставляя информацию о ее использовании и опциях.
   ```shell
   mvn help:describe -Dcmd=compile
   ```

#### Профили и активация команд:

Maven позволяет использовать профили для настройки различных конфигураций сборки. Профили можно активировать с помощью команды `-P`.

```shell
mvn clean install -Pdev
```

Эта команда активирует профиль с идентификатором `dev`, что позволяет изменять конфигурацию сборки в зависимости от среды.

#### Плагины и команды плагинов:

Maven имеет модульную архитектуру, которая позволяет использовать плагины для расширения функциональности. Плагины добавляют дополнительные команды. Например, плагин Surefire используется для выполнения тестов:

```shell
mvn surefire:test
```

#### Общие опции командной строки:

- **`-D`**: Устанавливает системные свойства, которые могут быть использованы в POM-файле.
  ```shell
  mvn clean install -DskipTests=true
  ```
  Эта команда пропускает тесты во время сборки.

- **`-e`**: Включает детализированное отображение ошибок.
  ```shell
  mvn clean install -e
  ```

- **`-X`**: Включает отладочный режим, предоставляя более подробную информацию о процессе сборки.
  ```shell
  mvn clean install -X
  ```

- **`-pl`**: Собирает только указанные модули в многомодульном проекте.
  ```shell
  mvn clean install -pl module-name
  ```

#### Структура POM файла

Файл `pom.xml` в Maven содержит множество тегов, каждый из которых играет свою роль в описании и конфигурации проекта. Рассмотрим основные теги и их назначение:

#### Основные теги:

1. **`<project>`**
   Корневой элемент POM-файла. Включает в себя всю конфигурацию проекта.

2. **`<modelVersion>`**
   Указывает версию модели POM, которую использует Maven. Обычно это `4.0.0`.

3. **`<groupId>`**
   Определяет уникальный идентификатор для группы, к которой принадлежит проект. Обычно соответствует домену компании, написанному в обратном порядке.

4. **`<artifactId>`**
   Уникальный идентификатор для проекта в рамках группы. Это имя проекта или библиотеки.

5. **`<version>`**
   Определяет версию проекта. Обычно следуют правилам семантического версионирования.

6. **`<packaging>`**
   Указывает тип артефакта, который будет создан. Возможные значения: `jar`, `war`, `ear`, `pom`. По умолчанию — `jar`.

7. **`<name>`**
   Человеко-читаемое имя проекта.

8. **`<description>`**
   Краткое описание проекта.

9. **`<url>`**
   URL-адрес, связанный с проектом.

#### Управление зависимостями:

1. **`<dependencies>`**
   Корневой элемент для всех зависимостей проекта.

2. **`<dependency>`**
   Описывает одну зависимость.

   - **`<groupId>`** — группа зависимости.
   - **`<artifactId>`** — артефакт зависимости.
   - **`<version>`** — версия зависимости.
   - **`<scope>`** — область видимости зависимости (`compile`, `provided`, `runtime`, `test`, `system`).

#### Управление сборкой:

1. **`<build>`**
   Содержит информацию, связанную со сборкой проекта.

2. **`<plugins>`**
   Корневой элемент для всех плагинов сборки.

3. **`<plugin>`**
   Описывает один плагин.

   - **`<groupId>`** — группа плагина.
   - **`<artifactId>`** — артефакт плагина.
   - **`<version>`** — версия плагина.
   - **`<executions>`** — описывает различные этапы выполнения плагина.
   - **`<configuration>`** — конфигурация плагина.

#### Профили:

1. **`<profiles>`**
   Определяет набор профилей сборки, которые могут изменять конфигурацию проекта.

2. **`<profile>`**
   Описывает один профиль сборки.

   - **`<id>`** — уникальный идентификатор профиля.
   - **`<activation>`** — определяет условия активации профиля.
   - **`<properties>`** — свойства, которые применяются при активации профиля.

#### Управление репозиториями:

1. **`<repositories>`**
   Определяет список удаленных репозиториев для получения артефактов.

2. **`<repository>`**
   Описывает один репозиторий.

   - **`<id>`** — уникальный идентификатор репозитория.
   - **`<url>`** — URL-адрес репозитория.
   - **`<releases>`** — настройки для релизных артефактов.
   - **`<snapshots>`** — настройки для снапшотов.

#### Дополнительные теги:

1. **`<properties>`**
   Определяет произвольные свойства, которые могут использоваться в POM-файле.

2. **`<modules>`**
   Определяет модули мульти-модульного проекта.

3. **`<dependencyManagement>`**
   Определяет зависимости, версии которых будут управляться и могут быть унаследованы в других модулях.

#### Пример полного POM-файла:

```xml
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.example</groupId>
    <artifactId>my-app</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>My Application</name>
    <description>A simple application</description>
    <url>http://www.example.com/my-app</url>

    <properties>
        <maven.compiler.source>1.8</maven.compiler.source>
        <maven.compiler.target>1.8</maven.compiler.target>
    </properties>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.13.1</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.8.1</version>
                <configuration>
                    <source>1.8</source>
                    <target>1.8</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <repositories>
        <repository>
            <id>central</id>
            <url>https://repo.maven.apache.org/maven2</url>
        </repository>
    </repositories>

    <profiles>
        <profile>
            <id>dev</id>
            <activation>
                <property>
                    <name>env</name>
                    <value>dev</value>
                </property>
            </activation>
            <properties>
                <env>development</env>
            </properties>
        </profile>
    </profiles>
</project>
```